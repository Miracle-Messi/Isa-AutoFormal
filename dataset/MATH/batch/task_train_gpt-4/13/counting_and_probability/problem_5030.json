{
    "natural problem": "Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n",
    "natural solution": [
        "Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.",
        "Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.",
        "Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!",
        "= 54$ ways. Case 4: None of the three attributes are the same.",
        "We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.",
        "Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$."
    ],
    "natural answer": "117",
    "a_0": {
        "formal problem": "datatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ndefinition \"deck = {c :: Card. \\<exists>s c sh. shape c = s \\<and> color c = c \\<and> shade c = sh}\"\n\ntheorem\nfixes complementary :: \"Card set \\<Rightarrow> bool\"\nassumes h0 : \"card deck = 27\"\nand h1 : \"\\<forall>c1 c2 c3. complementary {c1, c2, c3} \\<longleftrightarrow>\n                ((shape c1 \\<noteq> shape c2 \\<and> shape c1 \\<noteq> shape c3 \\<and> shape c2 \\<noteq> shape c3) \\<or>\n                 (shape c1 = shape c2 \\<and> shape c1 = shape c3)) \\<and>\n                ((color c1 \\<noteq> color c2 \\<and> color c1 \\<noteq> color c3 \\<and> color c2 \\<noteq> color c3) \\<or>\n                 (color c1 = color c2 \\<and> color c1 = color c3)) \\<and>\n                ((shade c1 \\<noteq> shade c2 \\<and> shade c1 \\<noteq> shade c3 \\<and> shade c2 \\<noteq> shade c3) \\<or>\n                 (shade c1 = shade c2 \\<and> shade c1 = shade c3))\"\nshows  \"card {s. complementary s \\<and> card s = 3} = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ndefinition \"deck = {c :: Card. \\<exists>s c sh. shape c = s \\<and> color c = c \\<and> shade c = sh}\"\n\ntheorem\nfixes complementary :: \"Card set \\<Rightarrow> bool\"\nassumes h0 : \"card deck = 27\"\nand h1 : \"\\<forall>c1 c2 c3. complementary {c1, c2, c3} \\<longleftrightarrow>\n                ((shape c1 \\<noteq> shape c2 \\<and> shape c1 \\<noteq> shape c3 \\<and> shape c2 \\<noteq> shape c3) \\<or>\n                 (shape c1 = shape c2 \\<and> shape c1 = shape c3)) \\<and>\n                ((color c1 \\<noteq> color c2 \\<and> color c1 \\<noteq> color c3 \\<and> color c2 \\<noteq> color c3) \\<or>\n                 (color c1 = color c2 \\<and> color c1 = color c3)) \\<and>\n                ((shade c1 \\<noteq> shade c2 \\<and> shade c1 \\<noteq> shade c3 \\<and> shade c2 \\<noteq> shade c3) \\<or>\n                 (shade c1 = shade c2 \\<and> shade c1 = shade c3))\"\nshows  \"card {s. complementary s \\<and> card s = 3} = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "A deck of cards consists of 27 unique cards. Each card has a shape (circle, square, or triangle), a color (red, blue, or green), and a shade (light, medium, or dark). A set of 3 cards is considered complementary if and only if:\n\n1. All three cards have different shapes or all three cards have the same shape.\n2. All three cards have different colors or all three cards have the same color.\n3. All three cards have different shades or all three cards have the same shade.\n\nHow many sets of 3 complementary cards can be formed from the deck? The final answer is 117."
    },
    "a_1": {
        "formal problem": "datatype shape = Circle | Square | Triangle\ndatatype color = Red | Blue | Green\ndatatype shade = Light | Medium | Dark\n\nrecord card =\n  shape :: shape\n  color :: color\n  shade :: shade\n\ndefinition deck :: \"card set\" where\n  \"deck = {c. c \\<in> {\\<lparr> shape = s, color = c, shade = h \\<rparr> | s c h. s \\<in> {Circle, Square, Triangle} \\<and> c \\<in> {Red, Blue, Green} \\<and> h \\<in> {Light, Medium, Dark}} \\<and> card_ext c \\<in> {1..27}}\"\n\ndefinition complementary :: \"card set \\<Rightarrow> bool\" where\n  \"complementary S \\<longleftrightarrow> \n    card (\\<Union> S) = 3 \\<and>\n    ((\\<forall> c1 c2 c3. c1 \\<in> S \\<and> c2 \\<in> S \\<and> c3 \\<in> S \\<longrightarrow> shape c1 \\<noteq> shape c2 \\<and> shape c1 \\<noteq> shape c3 \\<and> shape c2 \\<noteq> shape c3) \\<or> (\\<forall> c. c \\<in> S \\<longrightarrow> shape c = shape (\\<Union> S))) \\<and>\n    ((\\<forall> c1 c2 c3. c1 \\<in> S \\<and> c2 \\<in> S \\<and> c3 \\<in> S \\<longrightarrow> color c1 \\<noteq> color c2 \\<and> color c1 \\<noteq> color c3 \\<and> color c2 \\<noteq> color c3) \\<or> (\\<forall> c. c \\<in> S \\<longrightarrow> color c = color (\\<Union> S))) \\<and>\n    ((\\<forall> c1 c2 c3. c1 \\<in> S \\<and> c2 \\<in> S \\<and> c3 \\<in> S \\<longrightarrow> shade c1 \\<noteq> shade c2 \\<and> shade c1 \\<noteq> shade c3 \\<and> shade c2 \\<noteq> shade c3) \\<or> (\\<forall> c. c \\<in> S \\<longrightarrow> shade c = shade (\\<Union> S)))\"\n\ntheorem\nfixes count_complementary :: \"nat\"\nassumes h0 : \"count_complementary = card {S. S \\<subseteq> deck \\<and> complementary S}\"\nshows  \"count_complementary = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype shape = Circle | Square | Triangle\ndatatype color = Red | Blue | Green\ndatatype shade = Light | Medium | Dark\n\nrecord card =\n  shape :: shape\n  color :: color\n  shade :: shade\n\ndefinition deck :: \"card set\" where\n  \"deck = {c. c \\<in> {\\<lparr> shape = s, color = c, shade = h \\<rparr> | s c h. s \\<in> {Circle, Square, Triangle} \\<and> c \\<in> {Red, Blue, Green} \\<and> h \\<in> {Light, Medium, Dark}} \\<and> card_ext c \\<in> {1..27}}\"\n\ndefinition complementary :: \"card set \\<Rightarrow> bool\" where\n  \"complementary S \\<longleftrightarrow> \n    card (\\<Union> S) = 3 \\<and>\n    ((\\<forall> c1 c2 c3. c1 \\<in> S \\<and> c2 \\<in> S \\<and> c3 \\<in> S \\<longrightarrow> shape c1 \\<noteq> shape c2 \\<and> shape c1 \\<noteq> shape c3 \\<and> shape c2 \\<noteq> shape c3) \\<or> (\\<forall> c. c \\<in> S \\<longrightarrow> shape c = shape (\\<Union> S))) \\<and>\n    ((\\<forall> c1 c2 c3. c1 \\<in> S \\<and> c2 \\<in> S \\<and> c3 \\<in> S \\<longrightarrow> color c1 \\<noteq> color c2 \\<and> color c1 \\<noteq> color c3 \\<and> color c2 \\<noteq> color c3) \\<or> (\\<forall> c. c \\<in> S \\<longrightarrow> color c = color (\\<Union> S))) \\<and>\n    ((\\<forall> c1 c2 c3. c1 \\<in> S \\<and> c2 \\<in> S \\<and> c3 \\<in> S \\<longrightarrow> shade c1 \\<noteq> shade c2 \\<and> shade c1 \\<noteq> shade c3 \\<and> shade c2 \\<noteq> shade c3) \\<or> (\\<forall> c. c \\<in> S \\<longrightarrow> shade c = shade (\\<Union> S)))\"\n\ntheorem\nfixes count_complementary :: \"nat\"\nassumes h0 : \"count_complementary = card {S. S \\<subseteq> deck \\<and> complementary S}\"\nshows  \"count_complementary = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "In a game, there are 27 unique cards, each with a shape (Circle, Square, or Triangle), a color (Red, Blue, or Green), and a shade (Light, Medium, or Dark). A set of cards is considered complementary if it consists of exactly 3 cards and satisfies the following conditions for each attribute (shape, color, and shade):\n\n1. Either all three cards have the same attribute value, or each card has a different attribute value.\n\nCalculate the total number of complementary sets that can be formed using these 27 cards. The final answer is 117."
    },
    "a_2": {
        "formal problem": "datatype shape = Circle | Square | Triangle\ndatatype color = Red | Blue | Green\ndatatype shade = Light | Medium | Dark\n\ntype_synonym card = \"shape * color * shade\"\n\ndefinition deck :: \"card set\" where\n\"deck = {c. \\<exists>s c s'. s \\<in> {Circle, Square, Triangle} \\<and> c \\<in> {Red, Blue, Green} \\<and> s' \\<in> {Light, Medium, Dark} \\<and> c = (s, c, s')}\"\n\ndefinition complementary :: \"card set \\<Rightarrow> bool\" where\n\"complementary S \\<longleftrightarrow> card S = 3 \\<and>\n(\\<forall>a b c. a \\<in> S \\<and> b \\<in> S \\<and> c \\<in> S \\<and> a \\<noteq> b \\<and> a \\<noteq> c \\<and> b \\<noteq> c \\<longrightarrow>\n((fst a \\<noteq> fst b \\<and> fst a \\<noteq> fst c \\<and> fst b \\<noteq> fst c) \\<or> (fst a = fst b \\<and> fst a = fst c)) \\<and>\n((snd a \\<noteq> snd b \\<and> snd a \\<noteq> snd c \\<and> snd b \\<noteq> snd c) \\<or> (snd a = snd b \\<and> snd a = snd c)) \\<and>\n((snd (snd a) \\<noteq> snd (snd b) \\<and> snd (snd a) \\<noteq> snd (snd c) \\<and> snd (snd b) \\<noteq> snd (snd c)) \\<or> (snd (snd a) = snd (snd b) \\<and> snd (snd a) = snd (snd c))))\"\n\ntheorem\nfixes complementary_sets :: \"(card set) set\"\nassumes h0 : \"\\<forall>S. S \\<in> complementary_sets \\<longleftrightarrow> complementary S\"\nshows  \"card complementary_sets = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype shape = Circle | Square | Triangle\ndatatype color = Red | Blue | Green\ndatatype shade = Light | Medium | Dark\n\ntype_synonym card = \"shape * color * shade\"\n\ndefinition deck :: \"card set\" where\n\"deck = {c. \\<exists>s c s'. s \\<in> {Circle, Square, Triangle} \\<and> c \\<in> {Red, Blue, Green} \\<and> s' \\<in> {Light, Medium, Dark} \\<and> c = (s, c, s')}\"\n\ndefinition complementary :: \"card set \\<Rightarrow> bool\" where\n\"complementary S \\<longleftrightarrow> card S = 3 \\<and>\n(\\<forall>a b c. a \\<in> S \\<and> b \\<in> S \\<and> c \\<in> S \\<and> a \\<noteq> b \\<and> a \\<noteq> c \\<and> b \\<noteq> c \\<longrightarrow>\n((fst a \\<noteq> fst b \\<and> fst a \\<noteq> fst c \\<and> fst b \\<noteq> fst c) \\<or> (fst a = fst b \\<and> fst a = fst c)) \\<and>\n((snd a \\<noteq> snd b \\<and> snd a \\<noteq> snd c \\<and> snd b \\<noteq> snd c) \\<or> (snd a = snd b \\<and> snd a = snd c)) \\<and>\n((snd (snd a) \\<noteq> snd (snd b) \\<and> snd (snd a) \\<noteq> snd (snd c) \\<and> snd (snd b) \\<noteq> snd (snd c)) \\<or> (snd (snd a) = snd (snd b) \\<and> snd (snd a) = snd (snd c))))\"\n\ntheorem\nfixes complementary_sets :: \"(card set) set\"\nassumes h0 : \"\\<forall>S. S \\<in> complementary_sets \\<longleftrightarrow> complementary S\"\nshows  \"card complementary_sets = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "There is a deck of cards, where each card has a shape (Circle, Square, or Triangle), a color (Red, Blue, or Green), and a shade (Light, Medium, or Dark). A set of three cards is considered complementary if all three cards have either the same or different shapes, the same or different colors, and the same or different shades. How many distinct complementary sets of cards can be formed? The final answer is 117."
    },
    "a_3": {
        "formal problem": "datatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card =\n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ndefinition all_cards :: \"Card set\" where\n\"all_cards = {<| shape = s, color = c, shade = sh |>\n              | s c sh. s \\<in> {Circle, Square, Triangle} \\<and>\n                         c \\<in> {Red, Blue, Green} \\<and>\n                         sh \\<in> {Light, Medium, Dark}}\"\n\ndefinition complementary :: \"Card set \\<Rightarrow> bool\" where\n\"complementary S \\<longleftrightarrow> card S = 3 \\<and>\n  (\\<forall>x y z. x \\<in> S \\<and> y \\<in> S \\<and> z \\<in> S \\<and> x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z \\<longrightarrow>\n    ((shape x \\<noteq> shape y \\<and> shape x \\<noteq> shape z \\<and> shape y \\<noteq> shape z) \\<or>\n     (shape x = shape y \\<and> shape x = shape z \\<and> shape y = shape z)) \\<and>\n    ((color x \\<noteq> color y \\<and> color x \\<noteq> color z \\<and> color y \\<noteq> color z) \\<or>\n     (color x = color y \\<and> color x = color z \\<and> color y = color z)) \\<and>\n    ((shade x \\<noteq> shade y \\<and> shade x \\<noteq> shade z \\<and> shade y \\<noteq> shade z) \\<or>\n     (shade x = shade y \\<and> shade x = shade z \\<and> shade y = shade z)))\"\n\ntheorem\n  \"card {S. S \\<subseteq> all_cards \\<and> complementary S} = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card =\n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ndefinition all_cards :: \"Card set\" where\n\"all_cards = {<| shape = s, color = c, shade = sh |>\n              | s c sh. s \\<in> {Circle, Square, Triangle} \\<and>\n                         c \\<in> {Red, Blue, Green} \\<and>\n                         sh \\<in> {Light, Medium, Dark}}\"\n\ndefinition complementary :: \"Card set \\<Rightarrow> bool\" where\n\"complementary S \\<longleftrightarrow> card S = 3 \\<and>\n  (\\<forall>x y z. x \\<in> S \\<and> y \\<in> S \\<and> z \\<in> S \\<and> x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z \\<longrightarrow>\n    ((shape x \\<noteq> shape y \\<and> shape x \\<noteq> shape z \\<and> shape y \\<noteq> shape z) \\<or>\n     (shape x = shape y \\<and> shape x = shape z \\<and> shape y = shape z)) \\<and>\n    ((color x \\<noteq> color y \\<and> color x \\<noteq> color z \\<and> color y \\<noteq> color z) \\<or>\n     (color x = color y \\<and> color x = color z \\<and> color y = color z)) \\<and>\n    ((shade x \\<noteq> shade y \\<and> shade x \\<noteq> shade z \\<and> shade y \\<noteq> shade z) \\<or>\n     (shade x = shade y \\<and> shade x = shade z \\<and> shade y = shade z)))\"\n\ntheorem\n  \"card {S. S \\<subseteq> all_cards \\<and> complementary S} = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "There are cards with 3 different shapes (Circle, Square, Triangle), 3 different colors (Red, Blue, Green), and 3 different shades (Light, Medium, Dark). A set of cards is called complementary if it contains exactly 3 cards, and for each attribute (shape, color, and shade), either all three cards have different values or all three cards have the same value. How many different complementary sets can be formed using these cards? The final answer is 117."
    },
    "a_4": {
        "formal problem": "datatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ntypedef Deck = \"{d :: Card set. card d = 27 \\<and> (\\<forall>s \\<in> UNIV. \\<forall>c \\<in> UNIV. \\<forall>sh \\<in> UNIV. \\<exists>!card. card \\<in> d \\<and> shape card = s \\<and> color card = c \\<and> shade card = sh)}\"\n\ndefinition complementary :: \"Card set \\<Rightarrow> bool\" where\n\"complementary S \\<longleftrightarrow> card S = 3 \\<and>\n   ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. shape x \\<noteq> shape y) \\<or> (\\<exists>sh. \\<forall>x \\<in> S. shape x = sh)) \\<and>\n   ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. color x \\<noteq> color y) \\<or> (\\<exists>co. \\<forall>x \\<in> S. color x = co)) \\<and>\n   ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. shade x \\<noteq> shade y) \\<or> (\\<exists>shd. \\<forall>x \\<in> S. shade x = shd))\"\n\ntheorem\nfixes d :: Deck\nshows  \"card {S. complementary S \\<and> S \\<subseteq> Rep_Deck d} = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ntypedef Deck = \"{d :: Card set. card d = 27 \\<and> (\\<forall>s \\<in> UNIV. \\<forall>c \\<in> UNIV. \\<forall>sh \\<in> UNIV. \\<exists>!card. card \\<in> d \\<and> shape card = s \\<and> color card = c \\<and> shade card = sh)}\"\n\ndefinition complementary :: \"Card set \\<Rightarrow> bool\" where\n\"complementary S \\<longleftrightarrow> card S = 3 \\<and>\n   ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. shape x \\<noteq> shape y) \\<or> (\\<exists>sh. \\<forall>x \\<in> S. shape x = sh)) \\<and>\n   ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. color x \\<noteq> color y) \\<or> (\\<exists>co. \\<forall>x \\<in> S. color x = co)) \\<and>\n   ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. shade x \\<noteq> shade y) \\<or> (\\<exists>shd. \\<forall>x \\<in> S. shade x = shd))\"\n\ntheorem\nfixes d :: Deck\nshows  \"card {S. complementary S \\<and> S \\<subseteq> Rep_Deck d} = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider a deck of 27 unique cards, where each card has a shape (circle, square, or triangle), a color (red, blue, or green), and a shade (light, medium, or dark). A set of three cards is said to be complementary if all three cards either have distinct shapes, colors, and shades or share the same shape, color, or shade. How many different complementary sets can be formed using the cards in the deck? The final answer is 117."
    },
    "a_5": {
        "formal problem": "datatype shape = Circle | Square | Triangle\ndatatype color = Red | Blue | Green\ndatatype shade = Light | Medium | Dark\n\nrecord card = \n  card_shape :: shape\n  card_color :: color\n  card_shade :: shade\n\ndefinition complementary :: \"card set \\<Rightarrow> bool\" where\n  \"complementary S \\<longleftrightarrow> (cardinal S = 3) \\<and>\n    ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. card_shape x = card_shape y) \\<or> (\\<forall>x \\<in> S. \\<forall>y \\<in> S. x \\<noteq> y \\<longrightarrow> card_shape x \\<noteq> card_shape y)) \\<and>\n    ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. card_color x = card_color y) \\<or> (\\<forall>x \\<in> S. \\<forall>y \\<in> S. x \\<noteq> y \\<longrightarrow> card_color x \\<noteq> card_color y)) \\<and>\n    ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. card_shade x = card_shade y) \\<or> (\\<forall>x \\<in> S. \\<forall>y \\<in> S. x \\<noteq> y \\<longrightarrow> card_shade x \\<noteq> card_shade y))\"\n\ntheorem\n  fixes deck :: \"card set\"\n  assumes h0 : \"cardinal deck = 27\"\nand h1 : \"finite deck\"\nand h2 : \"\\<forall>c1 c2. c1 \\<in> deck \\<and> c2 \\<in> deck \\<and> c1 \\<noteq> c2 \\<longrightarrow> card_shape c1 \\<noteq> card_shape c2 \\<or> card_color c1 \\<noteq> card_color c2 \\<or> card_shade c1 \\<noteq> card_shade c2\"\nshows  \"card {S. S \\<subseteq> deck \\<and> complementary S} = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype shape = Circle | Square | Triangle\ndatatype color = Red | Blue | Green\ndatatype shade = Light | Medium | Dark\n\nrecord card = \n  card_shape :: shape\n  card_color :: color\n  card_shade :: shade\n\ndefinition complementary :: \"card set \\<Rightarrow> bool\" where\n  \"complementary S \\<longleftrightarrow> (cardinal S = 3) \\<and>\n    ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. card_shape x = card_shape y) \\<or> (\\<forall>x \\<in> S. \\<forall>y \\<in> S. x \\<noteq> y \\<longrightarrow> card_shape x \\<noteq> card_shape y)) \\<and>\n    ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. card_color x = card_color y) \\<or> (\\<forall>x \\<in> S. \\<forall>y \\<in> S. x \\<noteq> y \\<longrightarrow> card_color x \\<noteq> card_color y)) \\<and>\n    ((\\<forall>x \\<in> S. \\<forall>y \\<in> S. card_shade x = card_shade y) \\<or> (\\<forall>x \\<in> S. \\<forall>y \\<in> S. x \\<noteq> y \\<longrightarrow> card_shade x \\<noteq> card_shade y))\"\n\ntheorem\n  fixes deck :: \"card set\"\n  assumes h0 : \"cardinal deck = 27\"\nand h1 : \"finite deck\"\nand h2 : \"\\<forall>c1 c2. c1 \\<in> deck \\<and> c2 \\<in> deck \\<and> c1 \\<noteq> c2 \\<longrightarrow> card_shape c1 \\<noteq> card_shape c2 \\<or> card_color c1 \\<noteq> card_color c2 \\<or> card_shade c1 \\<noteq> card_shade c2\"\nshows  \"card {S. S \\<subseteq> deck \\<and> complementary S} = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider a deck of 27 cards, each with a shape (Circle, Square, or Triangle), a color (Red, Blue, or Green), and a shade (Light, Medium, or Dark). A set of three cards is complementary if and only if:\n\n1. All three cards have the same shape or all three cards have different shapes.\n2. All three cards have the same color or all three cards have different colors.\n3. All three cards have the same shade or all three cards have different shades.\n\nAdditionally, any two distinct cards in the deck differ in at least one of the shape, color, or shade attributes. How many complementary sets of three cards can be found in the deck? The final answer is 117."
    },
    "a_6": {
        "formal problem": "datatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ntypedef Deck = \"{deck :: Card set. cardinality deck = 27 \\<and>\n                 (\\<forall> s \\<in> UNIV. \\<forall> c \\<in> UNIV. \\<forall> sh \\<in> UNIV.\n                   \\<exists>! card \\<in> deck. shape card = s \\<and> color card = c \\<and> shade card = sh)}\"\n\ndefinition complementary :: \"Card set \\<Rightarrow> bool\"\n  where \"complementary cards \\<equiv> card (UNIV :: Shape set) = 3 \\<or> card (shape ` cards) = 1) \\<and>\n                         (card (UNIV :: Color set) = 3 \\<or> card (color ` cards) = 1) \\<and>\n                         (card (UNIV :: Shade set) = 3 \\<or> card (shade ` cards) = 1)\"\n\ntheorem\nfixes deck :: Deck\nshows  \"card {cards. complementary cards \\<and> cards \\<subseteq> Rep_Deck deck \\<and> card cards = 3} = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ntypedef Deck = \"{deck :: Card set. cardinality deck = 27 \\<and>\n                 (\\<forall> s \\<in> UNIV. \\<forall> c \\<in> UNIV. \\<forall> sh \\<in> UNIV.\n                   \\<exists>! card \\<in> deck. shape card = s \\<and> color card = c \\<and> shade card = sh)}\"\n\ndefinition complementary :: \"Card set \\<Rightarrow> bool\"\n  where \"complementary cards \\<equiv> card (UNIV :: Shape set) = 3 \\<or> card (shape ` cards) = 1) \\<and>\n                         (card (UNIV :: Color set) = 3 \\<or> card (color ` cards) = 1) \\<and>\n                         (card (UNIV :: Shade set) = 3 \\<or> card (shade ` cards) = 1)\"\n\ntheorem\nfixes deck :: Deck\nshows  \"card {cards. complementary cards \\<and> cards \\<subseteq> Rep_Deck deck \\<and> card cards = 3} = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "There are 27 unique cards in a deck. Each card has a shape (Circle, Square, or Triangle), a color (Red, Blue, or Green), and a shade (Light, Medium, or Dark). Find the number of possible sets of 3 cards in the deck that are complementary. A set of 3 cards is considered complementary if all 3 shapes are present or all the cards have the same shape, all 3 colors are present or all the cards have the same color, and all 3 shades are present or all the cards have the same shade. The final answer is 117."
    },
    "a_7": {
        "formal problem": "datatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ntypedef Deck = \"{deck :: Card set. cardinality deck = 27 \\<and> (\\<forall> s \\<in> UNIV. \\<forall> c \\<in> UNIV. \\<forall> sh \\<in> UNIV. \\<exists>! ca \\<in> deck. shape ca = s \\<and> color ca = c \\<and> shade ca = sh)}\"\n\ndefinition complementary :: \"Card set \\<Rightarrow> bool\" where\n\"complementary S \\<longleftrightarrow> (cardinality S = 3 \\<and>\n  ((\\<forall> s \\<in> {shape c | c. c \\<in> S}. size {shape c | c. c \\<in> S} = 3) \\<or> (\\<exists> s. \\<forall> c \\<in> S. shape c = s)) \\<and>\n  ((\\<forall> c \\<in> {color c | c. c \\<in> S}. size {color c | c. c \\<in> S} = 3) \\<or> (\\<exists> c. \\<forall> ca \\<in> S. color ca = c)) \\<and>\n  ((\\<forall> sh \\<in> {shade c | c. c \\<in> S}. size {shade c | c. c \\<in> S} = 3) \\<or> (\\<exists> sh. \\<forall> c \\<in> S. shade c = sh)))\"\n\ntheorem\nfixes D :: Deck\nshows  \"card {S. complementary S} = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ntypedef Deck = \"{deck :: Card set. cardinality deck = 27 \\<and> (\\<forall> s \\<in> UNIV. \\<forall> c \\<in> UNIV. \\<forall> sh \\<in> UNIV. \\<exists>! ca \\<in> deck. shape ca = s \\<and> color ca = c \\<and> shade ca = sh)}\"\n\ndefinition complementary :: \"Card set \\<Rightarrow> bool\" where\n\"complementary S \\<longleftrightarrow> (cardinality S = 3 \\<and>\n  ((\\<forall> s \\<in> {shape c | c. c \\<in> S}. size {shape c | c. c \\<in> S} = 3) \\<or> (\\<exists> s. \\<forall> c \\<in> S. shape c = s)) \\<and>\n  ((\\<forall> c \\<in> {color c | c. c \\<in> S}. size {color c | c. c \\<in> S} = 3) \\<or> (\\<exists> c. \\<forall> ca \\<in> S. color ca = c)) \\<and>\n  ((\\<forall> sh \\<in> {shade c | c. c \\<in> S}. size {shade c | c. c \\<in> S} = 3) \\<or> (\\<exists> sh. \\<forall> c \\<in> S. shade c = sh)))\"\n\ntheorem\nfixes D :: Deck\nshows  \"card {S. complementary S} = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider a deck of 27 unique cards. Each card has a shape (circle, square, or triangle), a color (red, blue, or green), and a shade (light, medium, or dark). A set of three cards is called complementary if:\n\n1. All three cards have different shapes, or all three cards have the same shape.\n2. All three cards have different colors, or all three cards have the same color.\n3. All three cards have different shades, or all three cards have the same shade.\n\nHow many sets of three complementary cards are there in the deck? The final answer is 117."
    },
    "a_8": {
        "formal problem": "datatype shape = Circle | Square | Triangle\ndatatype color = Red | Blue | Green\ndatatype shade = Light | Medium | Dark\n\nrecord card =\n  shape :: shape\n  color :: color\n  shade :: shade\n\nlocale complementary_deck =\nfixes deck :: \"card set\" and complementary_set :: \"card set set\"\nassumes h0 : \"card_ext {shape = s, color = c, shade = sh} \\<in> deck\"\nand h1 : \"cardinality deck = 27\"\nand h2 : \"C \\<in> complementary_set \\<longleftrightarrow>\n   (cardinality C = 3 \\<and>\n    (\\<forall> c1 c2 c3. c1 \\<in> C \\<and> c2 \\<in> C \\<and> c3 \\<in> C \\<and> c1 \\<noteq> c2 \\<and> c2 \\<noteq> c3 \\<and> c1 \\<noteq> c3 \\<longrightarrow>\n      ((distinct [shape c1, shape c2, shape c3] \\<or> shape c1 = shape c2 \\<and> shape c2 = shape c3) \\<and>\n       (distinct [color c1, color c2, color c3] \\<or> color c1 = color c2 \\<and> color c2 = color c3) \\<and>\n       (distinct [shade c1, shade c2, shade c3] \\<or> shade c1 = shade c2 \\<and> shade c2 = shade c3))))\"\nshows  \"cardinality complementary_set = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype shape = Circle | Square | Triangle\ndatatype color = Red | Blue | Green\ndatatype shade = Light | Medium | Dark\n\nrecord card =\n  shape :: shape\n  color :: color\n  shade :: shade\n\nlocale complementary_deck =\nfixes deck :: \"card set\" and complementary_set :: \"card set set\"\nassumes h0 : \"card_ext {shape = s, color = c, shade = sh} \\<in> deck\"\nand h1 : \"cardinality deck = 27\"\nand h2 : \"C \\<in> complementary_set \\<longleftrightarrow>\n   (cardinality C = 3 \\<and>\n    (\\<forall> c1 c2 c3. c1 \\<in> C \\<and> c2 \\<in> C \\<and> c3 \\<in> C \\<and> c1 \\<noteq> c2 \\<and> c2 \\<noteq> c3 \\<and> c1 \\<noteq> c3 \\<longrightarrow>\n      ((distinct [shape c1, shape c2, shape c3] \\<or> shape c1 = shape c2 \\<and> shape c2 = shape c3) \\<and>\n       (distinct [color c1, color c2, color c3] \\<or> color c1 = color c2 \\<and> color c2 = color c3) \\<and>\n       (distinct [shade c1, shade c2, shade c3] \\<or> shade c1 = shade c2 \\<and> shade c2 = shade c3))))\"\nshows  \"cardinality complementary_set = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider a deck of 27 cards, where each card has a shape (circle, square, or triangle), a color (red, blue, or green), and a shade (light, medium, or dark). A set of three cards is called complementary if the following conditions are met:\n\n1. The shapes of the three cards are either all the same or all different.\n2. The colors of the three cards are either all the same or all different.\n3. The shades of the three cards are either all the same or all different.\n\nHow many complementary sets of three cards can be formed from this deck? The final answer is 117."
    },
    "a_9": {
        "formal problem": "datatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ndefinition complementary :: \"Card \\<Rightarrow> Card \\<Rightarrow> Card \\<Rightarrow> bool\" where\n\"complementary a b c \\<longleftrightarrow>\n  (((shape a \\<noteq> shape b) \\<and> (shape a \\<noteq> shape c) \\<and> (shape b \\<noteq> shape c)) \\<or>\n   ((shape a = shape b) \\<and> (shape a = shape c))) \\<and>\n  (((color a \\<noteq> color b) \\<and> (color a \\<noteq> color c) \\<and> (color b \\<noteq> color c)) \\<or>\n   ((color a = color b) \\<and> (color a = color c))) \\<and>\n  (((shade a \\<noteq> shade b) \\<and> (shade a \\<noteq> shade c) \\<and> (shade b \\<noteq> shade c)) \\<or>\n   ((shade a = shade b) \\<and> (shade a = shade c)))\"\n\ntheorem\nfixes deck :: \"Card set\"\nassumes h0 : \"card deck = 27\"\nand h1 : \"\\<forall> s c sh. \\<exists>! d. d \\<in> deck \\<and> shape d = s \\<and> color d = c \\<and> shade d = sh\"\nshows  \"card { (a, b, c) \\<in> deck \\<times> deck \\<times> deck. complementary a b c } = 117\"",
        "formal solution": "(* ### Problem\n Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n The final Answer is 117\n ### Proof\n Case 1: All three attributes are the same. This is impossible since sets contain distinct cards. Case 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question.\n Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\n Case 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3!\n = 54$ ways. Case 4: None of the three attributes are the same.\n We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3! )^2 = 36$ ways.\n Adding the cases up, we get $27 + 54 + 36 = \\boxed{117}$.\n *)\n\ndatatype Shape = Circle | Square | Triangle\ndatatype Color = Red | Blue | Green\ndatatype Shade = Light | Medium | Dark\n\nrecord Card = \n  shape :: Shape\n  color :: Color\n  shade :: Shade\n\ndefinition complementary :: \"Card \\<Rightarrow> Card \\<Rightarrow> Card \\<Rightarrow> bool\" where\n\"complementary a b c \\<longleftrightarrow>\n  (((shape a \\<noteq> shape b) \\<and> (shape a \\<noteq> shape c) \\<and> (shape b \\<noteq> shape c)) \\<or>\n   ((shape a = shape b) \\<and> (shape a = shape c))) \\<and>\n  (((color a \\<noteq> color b) \\<and> (color a \\<noteq> color c) \\<and> (color b \\<noteq> color c)) \\<or>\n   ((color a = color b) \\<and> (color a = color c))) \\<and>\n  (((shade a \\<noteq> shade b) \\<and> (shade a \\<noteq> shade c) \\<and> (shade b \\<noteq> shade c)) \\<or>\n   ((shade a = shade b) \\<and> (shade a = shade c)))\"\n\ntheorem\nfixes deck :: \"Card set\"\nassumes h0 : \"card deck = 27\"\nand h1 : \"\\<forall> s c sh. \\<exists>! d. d \\<in> deck \\<and> shape d = s \\<and> color d = c \\<and> shade d = sh\"\nshows  \"card { (a, b, c) \\<in> deck \\<times> deck \\<times> deck. complementary a b c } = 117\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "A deck of cards has 27 unique cards, where each card is characterized by a shape (circle, square, or triangle), a color (red, blue, or green), and a shade (light, medium, or dark). A set of three cards is considered complementary if and only if, for each attribute (shape, color, and shade), the three cards either all have the same attribute or all have different attributes.\n\nHow many sets of three complementary cards can be formed from this deck? The final answer is 117."
    },
    "level": "Level 5",
    "type": "Counting & Probability"
}