{
    "natural problem": "Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$.",
    "natural solution": [
        "Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.",
        "We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));",
        "label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.",
        "The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);",
        "label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));",
        "[/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$",
        "Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));",
        "label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$",
        "Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\",
        "3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$"
    ],
    "natural answer": "58",
    "a_0": {
        "formal problem": "theorem\nfixes M N :: int and x :: \"int list\"\nassumes h0 : \"x \\<in> perms [1,2,3,4,5]\"\nand h1 : \"M = Max {x!0*x!1 + x!1*x!2 + x!2*x!3 + x!3*x!4 + x!4*x!0 |x. x \\<in> perms [1,2,3,4,5]}\"\nand h2 : \"N = card {x |x. x \\<in> perms [1,2,3,4,5] \\<and> x!0*x!1 + x!1*x!2 + x!2*x!3 + x!3*x!4 + x!4*x!0 = M}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes M N :: int and x :: \"int list\"\nassumes h0 : \"x \\<in> perms [1,2,3,4,5]\"\nand h1 : \"M = Max {x!0*x!1 + x!1*x!2 + x!2*x!3 + x!3*x!4 + x!4*x!0 |x. x \\<in> perms [1,2,3,4,5]}\"\nand h2 : \"N = card {x |x. x \\<in> perms [1,2,3,4,5] \\<and> x!0*x!1 + x!1*x!2 + x!2*x!3 + x!3*x!4 + x!4*x!0 = M}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider all possible permutations of the list [1,2,3,4,5]. For each permutation, calculate the sum of the product of adjacent elements and the product of the last and first elements. Let $M$ be the maximum of these sums and $N$ be the count of permutations that yield this maximum sum. What is the sum of $M$ and $N$? The answer is 58."
    },
    "a_1": {
        "formal problem": "theorem\nfixes M N :: nat and P :: \"(nat \\<Rightarrow> nat) set\"\ndefines P_def : \"P \\<equiv> {p. bij p \\<and> {p 1, p 2, p 3, p 4, p 5} = {1,2,3,4,5}}\"\nassumes h0 : \"M = Max {(p 1) * (p 2) + (p 2) * (p 3) + (p 3) * (p 4) + (p 4) * (p 5) + (p 5) * (p 1) | p. p \\<in> P}\"\nand h1 : \"N = card {p \\<in> P. (p 1) * (p 2) + (p 2) * (p 3) + (p 3) * (p 4) + (p 4) * (p 5) + (p 5) * (p 1) = M}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes M N :: nat and P :: \"(nat \\<Rightarrow> nat) set\"\ndefines P_def : \"P \\<equiv> {p. bij p \\<and> {p 1, p 2, p 3, p 4, p 5} = {1,2,3,4,5}}\"\nassumes h0 : \"M = Max {(p 1) * (p 2) + (p 2) * (p 3) + (p 3) * (p 4) + (p 4) * (p 5) + (p 5) * (p 1) | p. p \\<in> P}\"\nand h1 : \"N = card {p \\<in> P. (p 1) * (p 2) + (p 2) * (p 3) + (p 3) * (p 4) + (p 4) * (p 5) + (p 5) * (p 1) = M}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider the set of bijective functions $p: \\{1,2,3,4,5\\} \\to \\{1,2,3,4,5\\}$. For each such function $p$, compute the value of $p(1) \\cdot p(2) + p(2) \\cdot p(3) + p(3) \\cdot p(4) + p(4) \\cdot p(5) + p(5) \\cdot p(1)$, and let $M$ be the maximum of these values. Let $N$ be the number of functions $p$ for which this maximum value $M$ is achieved. Find the value of $M + N$. The final answer is $58$."
    },
    "a_2": {
        "formal problem": "theorem\nfixes x :: \"nat \\<Rightarrow> nat\"\nand M N :: nat\nassumes h0 : \"\\<forall> x. (x 1 \\<le> 5 \\<and> x 2 \\<le> 5 \\<and> x 3 \\<le> 5 \\<and> x 4 \\<le> 5 \\<and> x 5 \\<le> 5) \\<longrightarrow> \n(x 1 * x 2 + x 2 * x 3 + x 3 * x 4 + x 4 * x 5 + x 5 * x 1) \\<le> M\"\nand h1 : \"N = card {x. (x 1 \\<le> 5 \\<and> x 2 \\<le> 5 \\<and> x 3 \\<le> 5 \\<and> x 4 \\<le> 5 \\<and> x 5 \\<le> 5) \\<and> \n(x 1 * x 2 + x 2 * x 3 + x 3 * x 4 + x 4 * x 5 + x 5 * x 1) = M}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes x :: \"nat \\<Rightarrow> nat\"\nand M N :: nat\nassumes h0 : \"\\<forall> x. (x 1 \\<le> 5 \\<and> x 2 \\<le> 5 \\<and> x 3 \\<le> 5 \\<and> x 4 \\<le> 5 \\<and> x 5 \\<le> 5) \\<longrightarrow> \n(x 1 * x 2 + x 2 * x 3 + x 3 * x 4 + x 4 * x 5 + x 5 * x 1) \\<le> M\"\nand h1 : \"N = card {x. (x 1 \\<le> 5 \\<and> x 2 \\<le> 5 \\<and> x 3 \\<le> 5 \\<and> x 4 \\<le> 5 \\<and> x 5 \\<le> 5) \\<and> \n(x 1 * x 2 + x 2 * x 3 + x 3 * x 4 + x 4 * x 5 + x 5 * x 1) = M}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Suppose we have five natural numbers, each of them is no greater than 5. We calculate the sum of the product of each two adjacent numbers, plus the product of the first and the last number. Let's call this sum M. Let N be the number of different combinations of these five numbers that give us the sum M. Prove that M plus N equals 58."
    },
    "a_3": {
        "formal problem": "theorem\nfixes x :: \"nat list\" and M N :: nat\nassumes h0 : \"set x = {1,2,3,4,5}\"\nand h1 : \"M = Max {x!(i mod 5) * x!((i+1) mod 5) | i. i \\<in> {0..4}}\"\nand h2 : \"N = card {x. set x = {1,2,3,4,5} \\<and> M = (\\<Sum>i\\<in>{0..4}. x!(i mod 5) * x!((i+1) mod 5))}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes x :: \"nat list\" and M N :: nat\nassumes h0 : \"set x = {1,2,3,4,5}\"\nand h1 : \"M = Max {x!(i mod 5) * x!((i+1) mod 5) | i. i \\<in> {0..4}}\"\nand h2 : \"N = card {x. set x = {1,2,3,4,5} \\<and> M = (\\<Sum>i\\<in>{0..4}. x!(i mod 5) * x!((i+1) mod 5))}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Let's consider a list x of natural numbers that contains the elements {1,2,3,4,5}. Define M as the maximum value of the product of every two adjacent elements in the list (considering the list to be circular). Now, let N be the number of different arrangements of the list x that yield the same maximum sum as M when we sum up the product of every two adjacent elements. What is the value of M + N? The final answer is 58."
    },
    "a_4": {
        "formal problem": "theorem\nfixes x :: \"nat \\<Rightarrow> nat\" and M N :: nat\nassumes h0 : \"x permutes {1..5}\"\nand h1 : \"M = Max ((\\<Sum> i \\<in> {1..5}. x i * x ((i mod 5) + 1)) ` {p. p permutes {1..5}})\"\nand h2 : \"N = card {p. p permutes {1..5} \\<and> (\\<Sum> i \\<in> {1..5}. p i * p ((i mod 5) + 1)) = M}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes x :: \"nat \\<Rightarrow> nat\" and M N :: nat\nassumes h0 : \"x permutes {1..5}\"\nand h1 : \"M = Max ((\\<Sum> i \\<in> {1..5}. x i * x ((i mod 5) + 1)) ` {p. p permutes {1..5}})\"\nand h2 : \"N = card {p. p permutes {1..5} \\<and> (\\<Sum> i \\<in> {1..5}. p i * p ((i mod 5) + 1)) = M}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider all permutations of the set {1,2,3,4,5}. For each permutation, compute the sum of the product of each element and the next one (with the 5th element considered as followed by the first one). Let $M$ be the maximum value of these sums. Let $N$ be the number of permutations that yield this maximum value. Find the sum $M + N$. The final answer is 58."
    },
    "a_5": {
        "formal problem": "theorem\nfixes M N :: nat and x :: \"nat \\<Rightarrow> nat\"\nassumes h0 : \"M = GREATEST x. (\\<Sum>i=1..5. (x i) * (x ((i mod 5) + 1)))\"\nand h1 : \"N = card {x | x permutes {1..5} \\<and> (\\<Sum>i=1..5. (x i) * (x ((i mod 5) + 1))) = M}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes M N :: nat and x :: \"nat \\<Rightarrow> nat\"\nassumes h0 : \"M = GREATEST x. (\\<Sum>i=1..5. (x i) * (x ((i mod 5) + 1)))\"\nand h1 : \"N = card {x | x permutes {1..5} \\<and> (\\<Sum>i=1..5. (x i) * (x ((i mod 5) + 1))) = M}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider the set of all permutations of the numbers 1 to 5. For each permutation, calculate the sum of the product of each number and the number following it (with the first number following the fifth). Let $M$ be the greatest such sum. \n\nLet $N$ be the number of permutations for which the aforementioned sum is equal to $M$. \n\nFind the sum of $M$ and $N$. The final answer is $58$."
    },
    "a_6": {
        "formal problem": "theorem\nfixes x :: \"nat \\<Rightarrow> nat\"\nassumes h0 : \"set (map x [1,2,3,4,5]) = {1,2,3,4,5}\"\nand h1 : \"M = Max {(x i)*(x ((i mod 5) + 1)) | i. 1 \\<le> i \\<and> i \\<le> 5}\"\nand h2 : \"N = card {(x i)*(x ((i mod 5) + 1)) | i. 1 \\<le> i \\<and> i \\<le> 5}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes x :: \"nat \\<Rightarrow> nat\"\nassumes h0 : \"set (map x [1,2,3,4,5]) = {1,2,3,4,5}\"\nand h1 : \"M = Max {(x i)*(x ((i mod 5) + 1)) | i. 1 \\<le> i \\<and> i \\<le> 5}\"\nand h2 : \"N = card {(x i)*(x ((i mod 5) + 1)) | i. 1 \\<le> i \\<and> i \\<le> 5}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "A function $x$ maps the set $\\{1,2,3,4,5\\}$ to itself. Let $M$ be the maximum value of the product $x(i) \\cdot x((i \\mod 5) + 1)$ for $1 \\leq i \\leq 5$. Let $N$ be the number of distinct values of the product $x(i) \\cdot x((i \\mod 5) + 1)$ for $1 \\leq i \\leq 5$. What is the value of $M + N$? The final answer is 58."
    },
    "a_7": {
        "formal problem": "theorem\nfixes M N :: real\nassumes h0 : \"M = (GREATEST x. \\<exists> p. permutation p [1,2,3,4,5] \\<and> sum_list (zipWith (*) (p @ [hd p]) p) = x)\"\nand h1 : \"N = card {p. permutation p [1,2,3,4,5] \\<and> sum_list (zipWith (*) (p @ [hd p]) p) = M}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes M N :: real\nassumes h0 : \"M = (GREATEST x. \\<exists> p. permutation p [1,2,3,4,5] \\<and> sum_list (zipWith (*) (p @ [hd p]) p) = x)\"\nand h1 : \"N = card {p. permutation p [1,2,3,4,5] \\<and> sum_list (zipWith (*) (p @ [hd p]) p) = M}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider all the permutations of the list [1,2,3,4,5]. For each permutation, compute the sum of the product of each element with its successor (considering the first element as the successor of the last). Let M be the greatest of these sums. Let N be the number of permutations that yield a sum equal to M. Find the value of M + N. The final answer is 58."
    },
    "a_8": {
        "formal problem": "theorem\nfixes x :: \"nat list\"\nassumes h0 : \"set x = {1..5}\"\nand h1 : \"distinct x\"\nand h2 : \"M = Max {x!(i mod 5) * x!((i+1) mod 5) |i. i \\<in> {0..4}}\"\nand h3 : \"N = card {x. set x = {1..5} \\<and> distinct x \\<and> M = (\\<Sum>i\\<in>{0..4}. x!(i mod 5) * x!((i+1) mod 5))}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes x :: \"nat list\"\nassumes h0 : \"set x = {1..5}\"\nand h1 : \"distinct x\"\nand h2 : \"M = Max {x!(i mod 5) * x!((i+1) mod 5) |i. i \\<in> {0..4}}\"\nand h3 : \"N = card {x. set x = {1..5} \\<and> distinct x \\<and> M = (\\<Sum>i\\<in>{0..4}. x!(i mod 5) * x!((i+1) mod 5))}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Consider a list of distinct natural numbers from 1 to 5. Define $M$ as the maximum value of the product of every two consecutive elements in the list (considering the list as circular, so the last element and the first element are considered consecutive). Define $N$ as the number of such lists for which the sum of the product of every two consecutive elements equals $M$. Find the value of $M + N$. The final answer is 58."
    },
    "a_9": {
        "formal problem": "theorem\nfixes M N :: nat and x :: \"nat \\<Rightarrow> nat\"\nassumes h0 : \"M = Max {x 1 * x 2 + x 2 * x 3 + x 3 * x 4 + x 4 * x 5 + x 5 * x 1 |x. permutes {1,2,3,4,5} x}\"\nand h1 : \"N = card {x. permutes {1,2,3,4,5} x \\<and> x 1 * x 2 + x 2 * x 3 + x 3 * x 4 + x 4 * x 5 + x 5 * x 1 = M}\"\nshows  \"M + N = 58\"",
        "formal solution": "(* ### Problem\n Let $M$ be the maximum possible value of $x_1x_2+x_2x_3+\\cdots +x_5x_1$ where $x_1, x_2, \\dots, x_5$ is a permutation of $(1,2,3,4,5)$ and let $N$ be the number of permutations for which this maximum is attained. Evaluate $M+N$. The final Answer is 58\n ### Proof\n Arrange the five numbers 1, 2, 3, 4, 5 in a circle, in some order.\n We can place the 5 at the top; let the other numbers be $a,$ $b,$ $c,$ $d.$  Then the sum we are interested in is the sum of the product of adjacent pairs. [asy] unitsize(1 cm); label(\"$5$\", dir(90), fontsize(18));\n label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18)); [/asy] Assume that the numbers have been arranged so that the sum we are interested in has been maximized.\n The sum for this arrangement is $5a + ab + bc + cd + 5d.$  This means that if we were to change the arrangement, the sum must either stay the same or decrease. Suppose we swap 5 and $a$: [asy] unitsize(1 cm);\n label(\"$a$\", dir(90), fontsize(18)); label(\"$5$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18)); label(\"$d$\", dir(90 - 4*360/5), fontsize(18));\n [/asy] The sum is now $5a + 5b + bc + cd + ad.$  Hence, \\[5a + 5b + bc + cd + ad \\le 5a + ab + bc + cd + 5d.\\]This reduces to $ab - ad + 5d - 5b \\ge 0,$ which factors as $(5 - a)(d - b) \\ge 0.$  We know $5 - a \\ge 0,$ so $d - b \\ge 0.$  And since $b$ and $d$ are distinct, $d > b.$\n Now, suppose we swap 5 and $d$: [asy] unitsize(1 cm); label(\"$d$\", dir(90), fontsize(18)); label(\"$a$\", dir(90 - 360/5), fontsize(18)); label(\"$b$\", dir(90 - 2*360/5), fontsize(18)); label(\"$c$\", dir(90 - 3*360/5), fontsize(18));\n label(\"$5$\", dir(90 - 4*360/5), fontsize(18)); [/asy] The sum is now $ad + ab + bc + 5c + 5d.$  Hence, \\[ad + ab + bc + 5c + 5d \\le 5a + ab + bc + cd + 5d.\\]This reduces to $cd - ad + 5a - 5c \\ge 0,$ which factors as $(5 - d)(a - c) \\ge 0.$  We know $5 - d \\ge 0,$ so $a - c \\ge 0.$  And since $a$ and $c$ are distinct, $a > c.$\n Finally, by reflecting the diagram along the vertical axis, we can assume that $b > c.$  This leaves three cases to check: \\[ \\begin{array}{c|c|c|c|c} a & b & c & d & 5a + ab + bc + cd + 5d \\\\ \\hline 2 & 3 & 1 & 4 & 43 \\\\\n 3 & 2 & 1 & 4 & 47 \\\\ 4 & 2 & 1 & 3 & 48 \\end{array} \\]Hence, the largest possible sum is 48. Furthermore, there are ten permutations that work: The five cyclic permutations of $(5,4,2,1,3),$ and the five cyclic permutations of its reverse, namely $(5,3,1,2,4).$  Thus, $M + N = 48 + 10 = \\boxed{58}.$\n *)\n\ntheorem\nfixes M N :: nat and x :: \"nat \\<Rightarrow> nat\"\nassumes h0 : \"M = Max {x 1 * x 2 + x 2 * x 3 + x 3 * x 4 + x 4 * x 5 + x 5 * x 1 |x. permutes {1,2,3,4,5} x}\"\nand h1 : \"N = card {x. permutes {1,2,3,4,5} x \\<and> x 1 * x 2 + x 2 * x 3 + x 3 * x 4 + x 4 * x 5 + x 5 * x 1 = M}\"\nshows  \"M + N = 58\"\n proof- \n  show ?thesis sledgehammer",
        "informal problem": "Let $x$ be a permutation of the set $\\{1,2,3,4,5\\}$. Define $M$ as the maximum value of the expression $x(1) \\cdot x(2) + x(2) \\cdot x(3) + x(3) \\cdot x(4) + x(4) \\cdot x(5) + x(5) \\cdot x(1)$ over all such permutations $x$. Let $N$ be the number of permutations $x$ for which this expression equals $M$. Find the value of $M + N$. The final answer is $58$."
    },
    "level": "Level 5",
    "type": "Intermediate Algebra"
}